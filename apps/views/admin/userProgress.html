<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Ti·∫øn tr√¨nh h·ªçc c·ªßa h·ªçc sinh</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">

    <div class="container py-5">
        <h2 class="mb-4">üìö Theo d√µi ti·∫øn tr√¨nh h·ªçc</h2>

        <div class="mb-3">
            <label for="userId" class="form-label">Nh·∫≠p ID h·ªçc sinh:</label>
            <input type="text" id="userId" class="form-control" placeholder="VD: 65ec29d7..." />
        </div>
        <button class="btn btn-primary mb-4" onclick="getProgress()">Xem ti·∫øn tr√¨nh</button>

        <div id="result" class="card p-4 d-none">
            <h4>Ti·∫øn tr√¨nh hi·ªán t·∫°i</h4>
            <p><strong>Unlocked Gates:</strong> <span id="gates"></span></p>
            <p><strong>Unlocked Stages:</strong> <span id="stages"></span></p>
            <p><strong>XP:</strong> <span id="xp"></span></p>
        </div>
    </div>

    <script>
        async function getProgress() {
            const userId = document.getElementById('userId').value;
            if (!userId) return alert('Vui l√≤ng nh·∫≠p userId');

            try {
                const res = await fetch(`/api/user-progress/${userId}`);
                const data = await res.json();

                if (data.success) {
                    const progress = data.data;
                    document.getElementById('gates').textContent = progress.unlockedGates?.join(', ') || 'Ch∆∞a c√≥';
                    document.getElementById('stages').textContent = progress.unlockedStages?.join(', ') || 'Ch∆∞a c√≥';
                    document.getElementById('xp').textContent = progress.experiencePoints;

                    document.getElementById('result').classList.remove('d-none');
                } else {
                    alert('Kh√¥ng t√¨m th·∫•y ti·∫øn tr√¨nh.');
                }
            } catch (err) {
                alert('L·ªói khi g·ªçi API');
                console.error(err);
            }
        }
    </script>

</body>

</html>